{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"@babel/runtime/helpers/toConsumableArray\");\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SelectService = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar devsupport_1 = require(\"../../devsupport\");\nvar SEPARATOR = ', ';\nvar SelectService = _createClass(function SelectService() {\n  var _this = this;\n  _classCallCheck(this, SelectService);\n  this.selectItem = function (multiSelect, descriptor, selected) {\n    if (multiSelect) {\n      return _this.createMultiSelectIndices(descriptor, selected);\n    }\n    return descriptor.index;\n  };\n  this.toStringSelected = function (selected) {\n    if (!Array.isArray(selected)) {\n      return '';\n    }\n    var options = selected.map(function (index) {\n      return `Option ${index.toString()}`;\n    });\n    return options.join(SEPARATOR);\n  };\n  this.isSelected = function (descriptor, selected) {\n    if (descriptor.multiSelect && _this.isGroup(descriptor)) {\n      return _this.containsSomeFromGroup(descriptor.index, selected);\n    }\n    return _this.contains(descriptor.index, selected);\n  };\n  this.isDisabled = function (descriptor) {\n    return !descriptor.multiSelect && _this.isGroup(descriptor);\n  };\n  this.createDescriptorForElement = function (element, multiSelect, index) {\n    var groupIndices = react_1.default.Children.map(element.props.children, function (child, row) {\n      return new devsupport_1.IndexPath(row, index);\n    });\n    return {\n      multiSelect: multiSelect,\n      groupIndices: groupIndices,\n      index: new devsupport_1.IndexPath(index)\n    };\n  };\n  this.createDescriptorForNestedElement = function (element, descriptor, index) {\n    return _objectSpread(_objectSpread({}, descriptor), {}, {\n      index: new devsupport_1.IndexPath(index, descriptor.index.row),\n      groupIndices: []\n    });\n  };\n  this.createMultiSelectIndices = function (descriptor, selected) {\n    var isIndexSelected = _this.isSelected(descriptor, selected);\n    return !isIndexSelected ? _this.addIndex(descriptor, selected) : _this.removeIndex(descriptor, selected);\n  };\n  this.isGroup = function (descriptor) {\n    return descriptor.groupIndices && descriptor.groupIndices.length > 0;\n  };\n  this.createGroupIndices = function (descriptor) {\n    return _this.isGroup(descriptor) ? descriptor.groupIndices : [descriptor.index];\n  };\n  this.addIndex = function (descriptor, selected) {\n    return [].concat(_toConsumableArray(selected), _toConsumableArray(_this.createGroupIndices(descriptor)));\n  };\n  this.removeIndex = function (descriptor, selected) {\n    var groupIndices = _this.createGroupIndices(descriptor);\n    return selected.filter(function (selectedIndex) {\n      return !_this.contains(selectedIndex, groupIndices);\n    });\n  };\n  this.contains = function (index, selected) {\n    return selected.some(function (selectedIndex) {\n      return selectedIndex.equals(index);\n    });\n  };\n  this.containsSomeFromGroup = function (index, selected) {\n    return selected.some(function (selectedIndex) {\n      return selectedIndex.section === index.row;\n    });\n  };\n});\nexports.SelectService = SelectService;","map":{"version":3,"names":["react_1","__importDefault","require","devsupport_1","SEPARATOR","SelectService","_createClass","_this","_classCallCheck","selectItem","multiSelect","descriptor","selected","createMultiSelectIndices","index","toStringSelected","Array","isArray","options","map","toString","join","isSelected","isGroup","containsSomeFromGroup","contains","isDisabled","createDescriptorForElement","element","groupIndices","default","Children","props","children","child","row","IndexPath","createDescriptorForNestedElement","_objectSpread","isIndexSelected","addIndex","removeIndex","length","createGroupIndices","concat","_toConsumableArray","filter","selectedIndex","some","equals","section","exports"],"sources":["../../../../../src/components/ui/select/select.service.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}